AJS.test.require("jira.webresources:jira-events",function(){var e=require("jira/util/events"),n=require("jquery");module("JIRA Events",{setup:function(){this.sandbox=sinon.sandbox.create()},teardown:function(){this.sandbox.restore()}}),test("Can trigger events",function(){var o=this.sandbox.spy();e.bind("foo",o),e.trigger("foo",["bar"]),equal(o.callCount,1),ok(n.inArray(o.getCall(0).args,"bar"))}),test("Triggers jQuery events",function(){var o=this.sandbox.spy();e.bind("foo",o),e.trigger("foo"),ok(o.getCall(0).args[0]instanceof n.Event)}),test("Bind adds an event",function(){var n=this.sandbox.spy();e.bind("foo",n),e.trigger("foo"),equal(n.callCount,1,"called when bound")}),test("Unbind removes the event",function(){var n=this.sandbox.spy();e.bind("foo",n),e.trigger("foo"),equal(n.callCount,1,"called when bound"),e.unbind("foo",n),e.trigger("foo"),equal(n.callCount,1,"should not be called any more")}),test("Binds events to the document",function(){var o=this.sandbox.spy();n(document).bind("foo",o),e.bind("foo",o),e.trigger("foo"),equal(o.callCount,2)})});