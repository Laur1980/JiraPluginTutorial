AJS.test.require(["jira.webresources:jira-analytics-amd"],function(){"use strict";var e=require("jira/analytics");module("ViewIssueAnalytics",{setup:function(){this.sandbox=sinon.sandbox.create(),AJS.EventQueue=[]},teardown:function(){this.sandbox.restore()},makeEvent:function(e,t,r){var p={name:e};return t&&(p.data=t),r&&(p.properties=r),p}}),test("Should use options.data",function(){var t={property1:"property1",property2:"property2"},r=this.makeEvent("testEvent",t);e.send(r),equal(AJS.EventQueue.length,1,"1 event should be queried");var p={name:"testEvent",data:t,properties:t};deepEqual(AJS.EventQueue[0],p)}),test("Should use options.properties",function(){var t={property1:"property1",property2:"property2"},r=this.makeEvent("testEvent",void 0,t);e.send(r),equal(AJS.EventQueue.length,1,"1 event should be queried");var p={name:"testEvent",properties:t};deepEqual(AJS.EventQueue[0],p)}),test("Should merge options.data and options.properties",function(){var t={property1:"property1",property2:"property2"},r={property2:"property2prop",property3:"property3"},p=this.makeEvent("testEvent",t,r);e.send(p),equal(AJS.EventQueue.length,1,"1 event should be queried");var n={name:"testEvent",data:t,properties:{property1:"property1",property2:"property2prop",property3:"property3"}};deepEqual(AJS.EventQueue[0],n)}),test("Should trigger jiraAnalyticsEvent",function(){var t={property1:"property1",property2:"property2"},r=this.makeEvent("testEvent",void 0,t),p=[];AJS.bind("jiraAnalyticsEvent.analyticsTest",function(e,t){p.push(t)}),e.send(r),equal(p.length,1,"1 event should be trigger");var n={name:"testEvent",properties:t};deepEqual(p[0],n),AJS.unbind(".analyticsTest")})});