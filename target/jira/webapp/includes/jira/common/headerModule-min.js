define("jira/common/header",["jira/util/formatter","jira/message","jira/issue","jira/util/events","exports","wrm/context-path"],function(e,n,s,t,i,o){"use strict";var r,u,a,c,d={},p=function(n,s){var t=n.substr(0,n.indexOf("-"));return e.format('<a href="{0}" target="_blank">',o()+"/plugins/servlet/project-config/"+t+"/"+s)},I=function(e){e&&n.showSuccessMsg(e,{closeable:!0}),d={}},f=function(e,n){var s="";return d.versionCreated&&(s="<p>"+e+"</p>"),d.componentCreated&&(s+="<p>"+n+"</p>"),s},l=function(){return!!(JIRA&&JIRA.Issues&&JIRA.Issues.Application)&&JIRA.Issues.Application};i.initialize=function(){t.bind("QuickCreateIssue.sessionComplete",r=function(n,t){var i=[].concat(t).pop(),o=s.issueCreatedMessage(i);o+=f(e.I18n.getText("jira.version.created.quick.create",p(i.issueKey,"versions"),"</a>"),e.I18n.getText("jira.component.created.quick.create",p(i.issueKey,"components"),"</a>")),I(o)}),l()&&l().on("issueEditor:saveSuccess",u=function(n){var t=n&&n.issueKey?n.issueKey:s.getIssueKey(),i=f(e.I18n.getText("jira.version.created",p(t,"versions"),"</a>"),e.I18n.getText("jira.component.created",p(t,"components"),"</a>"));I(i)}),t.bind("Issue.Version.new.selected",a=function(){d.versionCreated=!0}),t.bind("Issue.Component.new.selected",c=function(){d.componentCreated=!0})},i.unbind=function(){t.unbind("QuickCreateIssue.sessionComplete",r),t.unbind("Issue.Version.new.selected",a),t.unbind("Issue.Component.new.selected",c),l()&&l().unbind("issueEditor:saveSuccess",u)}});