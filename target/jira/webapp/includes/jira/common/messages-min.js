define("jira/message/templates",["underscore"],function(e){var s=JIRA.Templates.Messages;return e.extend({WARNING:s.warningMsg,ERROR:s.errorMsg,SUCCESS:s.successMsg,INFO:s.infoMsg},s)}),define("jira/message",["jira/flag","jquery","jira/message/templates","jira/data/local-storage"],function(e,s,r,a){"use strict";function t(e,r){r=r||{};var a,t=r.type({msg:e,closeable:r.closeable}),o=s("<div>").html(t),n=null!=r.timeout?r.timeout:M;return r.closeable&&o.find(".icon-close").click(function(e){e.preventDefault(),null!=a&&window.clearTimeout(a),o.remove()}),n>0&&(a=window.setTimeout(function(){o.fadeOut(function(){o.remove()})},1e3*n)),o}function o(e,s){return s=s||{},t(e,s).prependTo(s.target)}function n(e,s){return s=s||{},s.type="WARNING",I(e,s)}function g(e,s){return s=s||{},s.type="SUCCESS",I(e,s)}function i(e,s){return s=s||{},s.type="ERROR",I(e,s)}function u(e,s){return s=s||{},s.type="INFO",I(e,s)}function c(r,a){var t={};a=a||{},t.type=a.type,void 0===a.timeout?!1===a.closeable&&(t.close="auto"):a.timeout>0?t.close="auto":!1===a.closeable?t.close="never":t.close="manual";var o=s(e.showMsg("",r,t));return a.id&&o.attr("id",a.id),o}function l(e,r){return c(e,s.extend({},r,{type:"error"}))}function m(e,r){return c(e,s.extend({},r,{type:"warning"}))}function f(e,r){return c(e,s.extend({},r,{type:"success"}))}function d(e,r){return c(e,s.extend({},r,{type:"info"}))}function p(e,r){var a=s(e);r=r||{},a.css("backgroundColor","#fff").animate({backgroundColor:r.backgroundColor||"#ffd"}),window.setTimeout(function(){a.animate({backgroundColor:"#fff"},"slow",function(){a.css("backgroundColor","")})},3e3)}var M=10,I=function(){var e="jira.messages.reloadMessageMsg";return s(function(){var t,n,g,i=a.getItem(e);if(i){t=a.getItem("jira.messages.reloadMessageType"),n="true"===a.getItem("jira.messages.reloadMessageCloseable")||!0===a.getItem("jira.messages.reloadMessageCloseable"),g=a.getItem("jira.messages.reloadMessageTarget"),a.removeItem(e),a.removeItem("jira.messages.reloadMessageType"),a.removeItem("jira.messages.reloadMessageCloseable"),a.removeItem("jira.messages.reloadMessageTarget");var u={WARNING:{soyTemplate:r.warningMsg,auiType:"warning"},ERROR:{soyTemplate:r.errorMsg,auiType:"error"},SUCCESS:{soyTemplate:r.successMsg,auiType:"success"},INFO:{soyTemplate:r.infoMsg,auiType:"info"}};!g||s(g).is(document.body)?c(i,{type:u[t].auiType,closeable:n}):o(i,{type:u[t].soyTemplate,closeable:n,target:s(g)})}}),function(s,r){a.setItem(e,s),a.setItem("jira.messages.reloadMessageType",r.type),r.closeable&&a.setItem("jira.messages.reloadMessageCloseable",r.closeable),r.target&&a.setItem("jira.messages.reloadMessageTarget",r.target)}}(),w=function(){var e="jira.messages.fadeInBackground.target";return s(function(){var s=a.getItem("jira.messages.fadeInBackground.color"),r=a.getItem(e);a.removeItem("jira.messages.fadeInBackground.color"),a.removeItem(e),p(r,{backgroundColor:s})}),function(s,r){r=r||{};var t=a.getItem(e);t?(t=t.split(","),t.push(s),t=t.join(",")):t=s,a.setItem(e,t),a.setItem("jira.messages.fadeInBackground.color",r.backgroundColor||"#ffd")}}(),y={Types:r,DefaultTimeout:10,buildMsg:t,showMsg:c,showMessageAtTarget:o,showMsgOnReload:I,fadeInBackground:p,fadeInBackgroundOnReload:w,showErrorMsg:l,showWarningMsg:m,showSuccessMsg:f,showInfoMsg:d,showReloadErrorMsg:i,showReloadWarningMsg:n,showReloadSuccessMsg:g,showReloadInfoMsg:u},h={removeInVersion:"8.0",alternativeName:"jira/flag",sinceVersion:"6.4"};return AJS.deprecate.prop(y,"showMsg",h),AJS.deprecate.prop(y,"showErrorMsg",h),AJS.deprecate.prop(y,"showWarningMsg",h),AJS.deprecate.prop(y,"showSuccessMsg",h),y}),AJS.namespace("JIRA.Messages",null,require("jira/message")),function(){var e=require("jira/message/templates"),s=require("jira/message"),r=require("jquery");r.fn.fadeInBackground=function(e){return s.fadeInBackground(this,e),this},r.fn.showErrorMsg=function(r,a){return a=a||{},a.target=this,a.type=e.errorMsg,s.showMessageAtTarget(r,a)},r.fn.showWarningMsg=function(r,a){return a=a||{},a.target=this,a.type=e.warningMsg,s.showMessageAtTarget(r,a)},r.fn.showSuccessMsg=function(r,a){return a=a||{},a.target=this,a.type=e.successMsg,s.showMessageAtTarget(r,a)},r.fn.showInfoMsg=function(r,a){return a=a||{},a.target=this,a.type=e.infoMsg,s.showMessageAtTarget(r,a)}}();