define("jira/admin/view-user/view-user",["jira/util/urls","jira/util/formatter","jira/admin/application-selector","jira/flag","jira/skate","marionette","jquery"],function(i,e,t,n,a,s,l){"use strict";return s.ItemView.extend({template:JIRA.Templates.Admin.ViewUser.applicationsAndGroupsContent,initialize:function(){this._initializeApplicationSelector()},onRender:function(){this._initializeApplicationSelector()},_initializeApplicationSelector:function(){var i=this,e=l(".application-picker");0!==e.length&&(this.applicationSelector=new t({el:e,disableEffectiveAccess:!0,disableUndefinedWarningDisplaying:!0}),a.init(e),this.listenTo(this.applicationSelector,"itemview:application:toggle",function(e,t){t.manual&&(i.applicationSelector.disableAllApplications(),i.trigger("application-trigger",{application:e}))}),this.listenTo(this.applicationSelector,"itemview:dialog:opened",function(e,t){i.inlineWarningOpened={applicationKey:e.getApplicationKey(),type:t.type}}),this.inlineWarningOpened&&this.applicationSelector.getByKey(this.inlineWarningOpened.applicationKey).displayWarning(this.inlineWarningOpened.type),delete this.inlineWarningOpened)},onError:function(i,t){this.data={};try{this.data=JSON.parse(i),this.data.selectableApplications&&this.data.selectableApplications.length>0&&this.render()}catch(i){}n.showWarningMsg(e.I18n.getText("admin.viewuser.error.rest.title"),JIRA.Templates.Admin.ViewUser.applicationAccessError({messages:this.data.errorMessages,status:t}))},update:function(i){this.data=i,this.render()},serializeData:function(){return l.extend({token:i.atl_token(),username:this.options.username,isUserEditable:this.data.editable},this.data)}})});