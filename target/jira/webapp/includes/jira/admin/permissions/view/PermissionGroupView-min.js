define("jira/project/permissions/permissiongroupview",["backbone","jira/project/permissions/permissionrowview","underscore","jira/project/permissions/securitytypes"],function(e,i,t,n){"use strict";return e.View.extend({tagName:"div",className:"permissions-group",template:JIRA.Templates.ProjectPermissions.permissionTable,initialize:function(e){this.readOnly=e.readOnly,this.listenTo(this.model,"change",this.render)},render:function(){if(0===this.model.get("permissions").length)return this;var e=[];this.model.get("permissions").each(function(i){var s=[];t.each(i.attributes.grants,function(e){e.securityType===n.SINGLE_USER&&t.each(e.values,function(e){!1===e.valid&&s.push({displayValue:e.displayValue})})}),Object.keys(s).length>0&&e.push({permName:i.attributes.permissionName,content:s})}),this.$el.html(this.template({heading:this.model.get("heading"),readOnly:this.readOnly,warningContent:e}));var s=this.$("tbody"),r=this;return this.model.get("permissions").each(function(e){var t=new i({model:e,readOnly:r.readOnly});t.on("openAddDialog",function(e){r.trigger("openAddDialog",e)}).on("openDeleteDialog",function(e){r.trigger("openDeleteDialog",e)}),s.append(t.render().el)}),this}})});