AJS.test.require(["jira.webresources:application-role-labels"],function(){require(["underscore","jquery","jira/admin/application/application-role-labels","jira/admin/application/group-labels-store"],function(e,t,a,n){function l(e,t,a){return{title:e,text:t,type:a}}function o(e,a){var n=new t.Deferred;return this.sandbox.stub(e,a,n.resolve.bind(n)),n}module("ApplicationRoleLabels tests",{setup:function(){this.context=AJS.test.mockableModuleContext(),this.sandbox=sinon.sandbox.create()},teardown:function(){this.sandbox.restore()}}),asyncTest("sync labels called after attach",function(e){expect(6);var l=t("#qunit-fixture"),r=o.call(this,n,"syncLabels"),i=o.call(this,n,"removeHandler"),s=o.call(this,n,"fetchLabels"),u=new a;t(u).attr("data-role-key","role1").attr("data-group-name","group1").appendTo(l),r.then(function(a,n,l){e.ok(void 0!==t(u).attr("resolved"),"component was processed by skate"),e.equal(a,"group1"),e.equal(n,"role1"),e.deepEqual(l,u.syncLabelsHandler),t(u).remove(),i.then(function(t){e.deepEqual(t,u.syncLabelsHandler,"removeCalled called with proper arguments")}),s.then(function(){start(),ok("fetch called on detach")})})}),test("updateLabels takes only MULTIPLE and ADMIN",function(){var e=new a;e.updateLabels([l("Admin","admin","ADMIN"),l("Foo","foo","FOO"),l("Multi","multi","MULTIPLE"),l("Multi","multi","multiple")]);var n=t(e.innerHTML).map(function(e,t){return t.title}).toArray();deepEqual(n,["Admin","Multi"])})})});