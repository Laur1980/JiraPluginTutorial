define("jira/attachment/inline-attach",["jira/util/urls","jira/util/formatter","jira/lib/class","jira/xsrf","jira/util/navigator","jquery","wrm/context-path"],function(t,e,r,n,i,o,a){"use strict";var s=a(),l=r.extend({init:function(t){var e=o(t);l.AjaxPresenter.isSupported(e)?new l.AjaxPresenter(e):new l.FormPresenter(e)}});return o.extend(l,{MAX_UPLOADS:2,DISPLAY_WAIT:600,rescope:function(t,e){return t?e?o.proxy(t,e):t:o.noop},copyArrayLike:function(t){return o.makeArray(t)},Renderers:{container:function(){return o("<div class='field-group'/>")}}}),l.Presenter=r.extend({init:function(){this.cancelled=!1,this.running=[],this.waiting=[]},_addUpload:function(t){return this.cancelled||(this.running.length>=l.MAX_UPLOADS?this.waiting.push(t):(this.running.push(t),t.upload())),this.running.length>0},_finishUpload:function(t){if(!this.cancelled&&(l.Presenter.removeFromArray(this.waiting,t),l.Presenter.removeFromArray(this.running,t)&&this.waiting.length>0)){var e=this.waiting.shift();this.running.push(e),e.upload()}return this.running.length>0},_cancel:function(){this.cancelled=!0;var t,e=l.copyArrayLike(this.waiting);for(t=0;t<e.length;t++)e[t].abort();var r=l.copyArrayLike(this.running);for(t=0;t<r.length;t++)r[t].abort();this.waiting=[],this.running=[]}}),o.extend(l.Presenter,{removeFromArray:function(t,e){var r=o.inArray(e,t);return r>=0?t.splice(r,1):null}}),l.FormPresenter=l.Presenter.extend({init:function(t){this._super(),this.form=new l.Form(new l.FileInput(t,!1)),this.form.fileSelector.onChange(o.proxy(this._attach,this)),this.form.onCancel(o.proxy(this._cancel,this))},_attach:function(t){if(this.form.clearErrors(),!this.cancelled){var e=this.form,r=this._createSubmitData(),n=e.cloneFileInput();e.fileSelector.clear();var i=e.addStaticProgress(t),o=new l.Timer(function(){!this.cancelled&&i.show()},this),a=new l.FormUpload({$input:n,url:l.FormPresenter.DEFAULT_URL,params:r,scope:this,before:function(){!this.cancelled&&i.start()},success:function(r){this.cancelled||(r.id&&r.name?e.addTemporaryFileCheckbox(r.id,r.name,i):r.errorMsg?e.addErrorWithFileName(r.errorMsg,t,i):e.addError(l.Text.tr("upload.error.bad.response",t),i))},error:function(r){this.cancelled||(r.indexOf("SecurityTokenMissing")>=0?e.addError(l.Text.tr("upload.xsrf.timeout",t),i):e.addError(l.Text.tr("upload.error.unknown",t),i))},after:function(){o.cancel(),i.remove(),this.cancelled||this._finishUpload(a)||e.enable()}});i.onCancel(function(){a.abort()}),this._addUpload(a)&&(o.schedule(l.DISPLAY_WAIT),e.disable()),e.fileSelector.focus()}},_cancel:function(){this._super(),this.form.enable()},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.id=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.create=!0,t.projectId=this.form.projectId}return t}}),l.FormPresenter.DEFAULT_URL=s+"/secure/AttachTemporaryFile.jspa?decorator=none",l.AjaxPresenter=l.Presenter.extend({init:function(t){this._super(),this.form=new l.Form(new l.FileInput(t,!0)),this.form.fileSelector.onChange(o.proxy(this._attach,this)),this.form.onCancel(o.proxy(this._cancel,this))},_attach:function(t){this.form.clearErrors(),this.cancelled||(t&&t.length>0&&(t=this._checkAndFilterFiles(t))&&this._uploadFiles(t),this.form.fileSelector.clear().focus())},_checkAndFilterFiles:function(t){if(t.length>l.AjaxPresenter.MAX_SELECTED_FILES)return this.form.addError(l.Text.tr("upload.error.too.many.files",t.length,l.AjaxPresenter.MAX_SELECTED_FILES)),null;for(var e=this.form.maxSize,r=[],n=0;n<t.length;n++)try{var i=t[n];if(0===i.size)this.form.addError(l.Text.tr("upload.empty.file",i.name));else if(e>0&&i.size>e){var o=l.Text.fileSize(e,i.size);this.form.addError(l.Text.tr("upload.too.big",i.name,o[1],o[0]))}else r.push({name:i.name,size:i.size,file:i})}catch(t){this.form.addError(l.AjaxUpload.getClientErrorMessage(t,i))}return 0===r.length?null:r},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.issueId=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.projectId=this.form.projectId}return t},_uploadFiles:function(t){var e=this.form,r=this._createSubmitData(),n=this,i=!1;o.each(t,function(){var t=e.addProgress(this),a=this,s=new l.Timer(function(){n.cancelled||t.show()}),u=new l.AjaxUpload({file:a.file,params:o.extend({filename:a.name,size:a.size},r),scope:n,url:l.AjaxPresenter.DEFAULT_URL,before:function(){!this.cancelled&&t.start()},progress:function(e){!this.cancelled&&t.update(e)},success:function(r,n){this.cancelled||(201===n?void 0!==r.id&&void 0!==r.name?e.addTemporaryFileCheckbox(r.id,r.name,t,a.file):e.addError(l.Text.tr("upload.error.bad.response",a.name),t):(r.token&&e.setAtlToken(r.token),r.errorMessage?e.addErrorWithFileName(r.errorMessage,a.name,t):e.addError(this._getErrorFromStatus(n,a),t)))},error:function(r,n){if(!this.cancelled)if(n<0)e.addError(r,t);else{var i=this._getErrorFromStatus(n,a);i?e.addError(i,t):e.addError(l.Text.tr("upload.error.unknown",a.name),t)}},after:function(){s.cancel(),t.finish().remove(),this.cancelled||this._finishUpload(u)||e.enable()}});t.onCancel(function(){u.abort()}),n._addUpload(u)&&(i=!0,s.schedule(l.DISPLAY_WAIT))}),i&&this.form.disable()},_getErrorFromStatus:function(t,e){return 0===t?l.Text.tr("upload.error.server.no.reply",e.name):400===t?l.Text.tr("upload.error.badrequest",e.name):401===t?l.Text.tr("upload.error.auth",e.name):l.Text.tr("upload.error.unknown.status",e.name,t)},_cancel:function(){this._super(),this.form.enable()}}),o.extend(l.AjaxPresenter,{DEFAULT_URL:s+"/rest/internal/2/AttachTemporaryFile",MAX_SELECTED_FILES:100,isSupported:function(t){return!!(t&&t[0]&&t[0].files)&&l.AjaxUpload.isSupported()}}),l.FileInput=r.extend({init:function(t,e){this.$element=t,this.$container=t.parent(),e&&void 0!==this.$element[0].files?(this.$element.attr("multiple","multiple"),this.multiple=!0):this.multiple=!1},clear:function(){return this.$element.val(""),this},getFiles:function(){return this.$element[0].files},hasFiles:function(){return this.getFiles().length>0},onChange:function(t){var e=this;return this.$element.change(function(){e.multiple?t.call(e,this.files):t.call(e,e.getFileName())}),this},focus:function(){if(this._isIE()){var t=this.$element;setTimeout(function(){t.focus()},0)}else this.$element.focus();return this},cloneInput:function(){var t=this.$element;return t.replaceWith(this.$element=t.clone(!0)),t.unbind(),t},getFileName:function(){var t=/^c:\\fakepath\\(?!$)/i;return function(){var e=this.$element.val();return e=e.replace(t,""),this._isIE()&&e.indexOf("\\")>=0&&(e=e.substring(e.lastIndexOf("\\")+1)),e}}(),_isIE:function(){return i.isIE()&&i.majorVersion()<11},before:function(t){t&&(t.$element&&(t=t.$element),this.$container.before(t))}}),function(){var t={showPercentage:!1,height:"2px"},e=0;l.ProgressBar=r.extend({init:function(){var e=this.$element=this._renderers.container();this.$progress=this._renderers.progress().appendTo(e),this.$progress.progressBar(0,t),this.hidden=!0,this.old=0},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.$progress.show(),this.hidden=!1),this.old!==e&&(this.$progress.progressBar(e,t),e>=100&&this.$progress.fadeOut(),this.old=e)},_renderers:{container:function(){return o("<div>").addClass("file-progress")},progress:function(){return o("<div>").attr("id","upload-progress-"+e++).hide()}}})}(),l.UploadProgress=r.extend({init:function(t){var e=this.$element=l.Renderers.container().hide(),r=this.progress=new l.ProgressBar,n=this._renders.content(t.name);this.$content=n.$content,this.$cancel=n.$cancel,e.append(n.$element).append(r.$element),this.total=t.size,this.current=0,this.name=t.name,this.timer=new l.Timer(this._update,this),this.rateNumerator=0,this.rateDenominator=0,this._title(l.Text.tr("upload.progress.title.waiting"))},start:function(){return this.started=this._now(),this.startedSize=0,this},update:function(t){return this.timer.cancel(),this._update(t)},_update:function(t){var e=this._now();void 0===t?t=this.current:t!==this.current&&(this.lastUpdate=e,this.current=t);var r,n,i=l.Text,o=Math.min(100,Math.round(t/this.total*100)),a=i.currentOutOfTotalSize(t,this.total);this.progress.value(o);var s=(e-this.started)/1e3;s>=2&&(this.startedSize>0&&this._addRate((t-this.startedSize)/s),this.started=e,this.startedSize=t);var u=this._calcRate();if(t>=l.UploadProgress.DATA_MIN&&u>0){var h=Math.max(1,(this.total-t)/u);r=i.rate(u),n=i.time(h)}return e-this.lastUpdate>=l.UploadProgress.STALLED_TIMEOUT?(this._content(i.tr("upload.file.stalled",this.name)),r?this._title(i.tr("upload.progress.title.known.stalled",r,a)):this._title(i.tr("upload.progress.title.unknown.stalled",a))):r?(this._title(i.tr("upload.progress.title.known",r,a,n)),this._content(i.tr("upload.file.remaining",this.name,n))):(this._title(a),this._content(this.name)),t<this.total&&this.timer.schedule(l.UploadProgress.UPLOAD_REFRESH),this},finish:function(){return this.progress.value(100),this.timer.cancel(),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_addRate:function(t){var e=l.UploadProgress.WEIGHT;this.rateNumerator=this.rateNumerator*e+t,this.rateDenominator=this.rateDenominator*e+1},_calcRate:function(){if(0===this.rateDenominator)return 0;var t=this.rateNumerator/this.rateDenominator;return Math.abs(t)<.005?0:t},_now:function(){return(new Date).getTime()},_renders:{content:function(t){var e=l.Text.tr("upload.file.waiting",t),r=o("<div class='loading file' />"),n=o("<span />").text(e),i=o("<a href='#' />").text(l.Text.tr("upload.cancel"));return r.append(n).append(" ").append(i),{$element:r,$content:n,$cancel:i}}}}),o.extend(l.UploadProgress,{STALLED_TIMEOUT:1e4,UPLOAD_REFRESH:2e3,DATA_MIN:20480,WEIGHT:.7}),l.UnknownProgress=r.extend({init:function(t){var e=this._renders.content(t);this.$element=e.$element,this.$cancel=e.$cancel,this.$content=e.$content,this.fileName=t,this._title(l.Text.tr("upload.progress.title.waiting"))},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},start:function(){return this._title(l.Text.tr("upload.progress.title.running")),this._content(this.fileName),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_renders:{content:function(t){var e=l.Text.tr("upload.file.waiting",t),r=o("<a href='#' />").text(l.Text.tr("upload.cancel")),n=o("<div class='loading file' />"),i=o("<span />").text(e);return n.append(i).append(" ").append(r),{$element:l.Renderers.container().append(n),$cancel:r,$content:i}}}}),l.Form=r.extend({init:function(t){if(this.fileSelector=t,this.$form=t.$element.closest("form"),this.maxSize=parseInt(this.$form.find("#attach-max-size").text()||o("#attach-max-size").text()),isNaN(this.maxSize))throw"Unable to find maximum upload size on form.";var e=!1,r=parseInt(this.$form.find(":input[name=id]").val());if(isNaN(r)||(e=!0,this.issueId=r),r=parseInt(this.$form.find(":input[name=pid]").val()),isNaN(r)||(e=!0,this.projectId=r),!e)throw"Unable to find either an issueId or projectId to submit the attachment to."},getAtlToken:function(){var e=this.$form.find("input[name='atl_token']");return e.length>0?e.val():t.atl_token()},setAtlToken:function(t){var e=this.$form.find("input[name='atl_token']");return e.length>0?e.val(t):n.updateTokenOnPage(t),this},getFormToken:function(){var t=this.$form.find("input[name='formToken']");return t.length>0?t.val():null},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},addProgress:function(t){var e=new l.UploadProgress(t);return this._addElement(e.$element),e},addStaticProgress:function(t){var e=new l.UnknownProgress(t);return this._addElement(e.$element),e},addTemporaryFileCheckbox:function(t,e,r,n){var i=this.addLocalThumbnailImage(e,n),a=l.Renderers.container(),s=o("<label>").attr("for","filetoconvert-"+t).text(e),u=o("<input type='checkbox' class='checkbox' name='filetoconvert' checked='checked'>").attr({id:"filetoconvert-"+t,value:t,title:l.Text.tr("upload.checkbox.title")});return a.append(u).append(s),i&&a.append(o("<br/>")).append(i),a.hide(),this._replaceElement(a,r),this},addLocalThumbnailImage:function(t,e){var r=null;if(window.URL=window.webkitURL||window.URL,e&&window.URL&&window.URL.createObjectURL){var n=/image.*/;if(e.type.match(n)){var i=this,a=t+" - "+l.Text.fileSize(e.size)+" - "+e.type,s=document.createElement("img");s.title=a,s.alt=a,s.onload=function(){var t=i.getAspectRatio(100,100,s.width,s.height);s.width=Math.round(s.width/t),s.height=Math.round(s.height/t),r.show(),window.URL.revokeObjectURL(s.src)},s.src=window.URL.createObjectURL(e),r=o(s).hide()}}return r},getAspectRatio:function(t,e,r,n){return r>t?Math.round(r/t):n>e?Math.round(n/e):1},addErrorWithFileName:function(t,e,r){return-1===t.indexOf(e)&&(t=l.Text.tr("upload.error.server",e,t)),this.addError(t,r)},addError:function(t,e){var r=l.Renderers.container();return r.addClass("error").append(o("<div>").text(t)).hide(),this._replaceElement(r,e),r},clearErrors:function(){return this.$form.find("div.error").remove(),this},cloneFileInput:function(){return this.fileSelector.cloneInput()},onCancel:function(t){return this.$form.find("a.cancel").click(o.proxy(t,this)),this},_getFormSubmits:function(){return this.$form.find("input[type=submit]")},_addElement:function(t){this.fileSelector.before(t)},_replaceElement:function(t,e){e&&e.$element?e.$element.replaceWith(t):this._addElement(t),t.fadeIn()}}),l.FormUpload=r.extend({init:function(t){var e=t.scope||null,r=l.rescope;this.$input=t.$input,this.url=t.url,this.params=t.params||{},this.successcb=r(t.success,e),this.errorcb=r(t.error,e),this.before=r(t.before,e),this.after=r(t.after,e),this.abortcb=r(t.abort,e),this.aborted=!1,this.$form=null,this.xhr=null},upload:function(){if(!this.aborted){var t=this.url,e=o.param(this.params);e&&(t=t+"?"+e);var r=this.$form=this._renders.form(t),n=this;this._addToBody(r.append(this.$input)),r.ajaxForm({dataType:"json",data:this.params,timeout:0,beforeSend:function(t){n.xhr=t},beforeSubmit:function(){n.before()},error:function(t){if(n.aborted)n.abortcb();else{var e=t&&t.responseText||"";n.errorcb(e)}},success:function(t){n.successcb(t||{})},complete:function(){n.$form&&(n.$form.remove(),n.$form=null),n.after()}}),r.submit()}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?(this.xhr.abort(),this.xhr=null):(this.abortcb(),this.after()))},_addToBody:function(t){o("body").append(t)},_renders:{form:function(t){return o("<form method='post' enctype='multipart/form-data'/>").attr("action",t).hide()}}}),l.AjaxUpload=r.extend({init:function(t){var e=t.scope||null,r=l.rescope;this.file=t.file,this.url=t.url,this.params=t.params||{},this.beforecb=r(t.before,e),this.progresscb=r(t.progress,e),this.errorcb=r(t.error,e),this.successcb=r(t.success,e),this.abortcb=r(t.abort,e),this.finalcb=r(t.after,e),this.aborted=!1},upload:function(){if(!this.aborted&&!this.xhr){var t=this.xhr=l.AjaxUpload.xhr();t.upload.onprogress=o.proxy(this._upload,this),t.onreadystatechange=o.proxy(this._statechange,this);var e=this.url,r=o.param(this.params);r&&(e=e+"?"+r),this.beforecb();try{t.open("POST",e,!0),t.setRequestHeader("Content-Type",this.file.type||"application/octet-stream"),t.send(this.file)}catch(t){this._clienterror(t,this.file)}}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?this.xhr.abort():(this.abortcb(),this.finalcb()))},_statechange:function(){if(4===this.xhr.readyState){if(this.aborted)this.abortcb();else{try{this.successcb(JSON.parse(this.xhr.responseText),this.xhr.status,this.xhr)}catch(t){this.errorcb(this.xhr.responseText,this.xhr.status,this.xhr)}this.xhr.upload.onprogress=this.xhr.statechange=null}this.finalcb()}},_clienterror:function(t,e){this.errorcb(l.AjaxUpload.getClientErrorMessage(t,e),-1,this.xhr),this.finalcb()},_upload:function(t){t.lengthComputable&&this.progresscb(t.loaded)}}),o.extend(l.AjaxUpload,{isSupported:function(){return l.AjaxUpload._fileApiSupport(window)&&l.AjaxUpload._xhrSupport()},xhr:function(){var t=l.AjaxUpload._xhrJquery();return t||(t=l.AjaxUpload._xhrDirect),l.AjaxUpload.xhr=t,t()},getClientErrorMessage:function(t,e){var r;try{r=e.name}catch(t){r="<unknown>"}return"NS_ERROR_FILE_ACCESS_DENIED"===t.name?l.Text.tr("upload.error.no.access",r):"NS_ERROR_FILE_NOT_FOUND"===t.name||"NS_ERROR_FILE_TARGET_DOES_NOT_EXIST"===t.name?l.Text.tr("upload.error.does.not.exist",r):l.Text.tr("upload.error.client.unknown",r,t.message||t)},_xhrJquery:function(){var t=o.ajaxSettings;return t&&t.xhr||null},_xhrDirect:function(){try{return new XMLHttpRequest}catch(t){return null}},_xhrSupport:function(){try{var t=l.AjaxUpload.xhr();if(t&&t.upload)return!0}catch(t){}return!1},_fileApiSupport:function(t){return t.File&&t.FileList&&(!i.isMozilla()||t.FileReader)}}),l.Timer=r.extend({init:function(t,e){this.callback=l.rescope(t,e||this),this._callback=o.proxy(this._callback,this),this.timeoutId=null},cancel:function(){return null!==this.timeoutId&&(this._endTimeout(this.timeoutId),this.timeoutId=null),this},schedule:function(t){return this.cancel(),this.timeoutId=this._startTimeout(this._callback,t),this},_callback:function(){this.timeoutId=null,this.callback()},_startTimeout:function(t,e){return window.setTimeout(t,e)},_endTimeout:function(t){window.clearTimeout(t)}}),l.Text=function(){var t=1024,r=1048576,n=1024*r,i=Math.floor(1018.88),o=Math.floor(.995*r),a=Math.floor(.995*n);return{"upload.empty.file":e.I18n.getText("upload.empty.file"),"upload.too.big":e.I18n.getText("upload.too.big"),"upload.error.bad.response":e.I18n.getText("upload.error.bad.response"),"upload.error.unknown.status":e.I18n.getText("upload.error.unknown.status"),"upload.error.auth":e.I18n.getText("upload.error.auth"),"upload.error.badrequest":e.I18n.getText("upload.error.badrequest"),"upload.error.server":e.I18n.getText("upload.error.server"),"upload.cancel":e.I18n.getText("common.words.cancel"),"upload.file.remaining":e.I18n.getText("upload.file.remaining"),"upload.file.waiting":e.I18n.getText("upload.file.waiting"),"upload.file.stalled":e.I18n.getText("upload.file.stalled"),"upload.checkbox.title":e.I18n.getText("attachfile.attachment.checkbox.title"),"upload.xsrf.timeout":e.I18n.getText("attachment.error.xsrf.expired"),"upload.error.unknown":e.I18n.getText("attachment.error.unknown"),"upload.progress.title.waiting":e.I18n.getText("upload.progress.title.waiting"),"upload.progress.title.running":e.I18n.getText("upload.progress.title.running"),"upload.progress.title.unknown.stalled":e.I18n.getText("upload.progress.title.unknown.stalled"),"upload.progress.title.known":e.I18n.getText("upload.progress.title.known"),"upload.progress.title.known.stalled":e.I18n.getText("upload.progress.title.known.stalled"),"upload.kilobyte":e.I18n.getText("upload.kilobyte"),"upload.kilobyte.part":e.I18n.getText("upload.kilobyte.part"),"upload.megabyte":e.I18n.getText("upload.megabyte"),"upload.megabyte.part":e.I18n.getText("upload.megabyte.part"),"upload.gigabyte":e.I18n.getText("upload.gigabyte"),"upload.gigabyte.part":e.I18n.getText("upload.gigabyte.part"),"upload.seconds":e.I18n.getText("upload.seconds"),"upload.minutes":e.I18n.getText("upload.minutes"),"upload.hours":e.I18n.getText("upload.hours"),"upload.hours.minutes":e.I18n.getText("upload.hours.minutes"),"upload.bytes.per.second":e.I18n.getText("upload.bytes.per.second"),"upload.kilobytes.per.second":e.I18n.getText("upload.kilobytes.per.second"),"upload.megabytes.per.second":e.I18n.getText("upload.megabytes.per.second"),"upload.error.no.access":e.I18n.getText("upload.error.no.access"),"upload.error.does.not.exist":e.I18n.getText("upload.error.does.not.exist"),"upload.error.client.unknown":e.I18n.getText("upload.error.client.unknown"),"upload.error.too.many.files":e.I18n.getText("upload.error.too.many.files"),"upload.error.server.no.reply":e.I18n.getText("upload.error.server.no.reply"),tr:function(t){if(0!==arguments.length){if(1===arguments.length)return this[t]||t;if(this[t]){var r=l.copyArrayLike(arguments);return r[0]=this[t],e.format.apply(AJS,r)}return t}},fileSize:function(){if(0!==arguments.length){var e,n=l.Text._classifySize(arguments[0]);if(e=n.unit===t?"upload.kilobyte":n.unit===r?"upload.megabyte":"upload.gigabyte",1===arguments.length)return this.tr(e,n.convert(arguments[0]));for(var i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=this.tr(e,n.convert(arguments[o]));return i}},currentOutOfTotalSize:function(e,n){var i,o=this._classifySize(n);return i=o.unit===t?"upload.kilobyte.part":o.unit===r?"upload.megabyte.part":"upload.gigabyte.part",this.tr(i,o.convert(e),o.convert(n))},_classifySize:function(e){var i;return i=e<=o?t:e<=a?r:n,{unit:i,convert:function(t){return l.Text._toDisplay(t/i)}}},time:function(t){if(t<60)return this.tr("upload.seconds",Math.floor(t));var e=t/60;if(e<60)return this.tr("upload.minutes",Math.floor(e));var r=Math.floor(e/60);return e=Math.floor(e%60),e>0?this.tr("upload.hours.minutes",r,e):this.tr("upload.hours",r)},rate:function(e){return e<=i?this.tr("upload.bytes.per.second",l.Text._toDisplay(e)):e<=o?this.tr("upload.kilobytes.per.second",l.Text._toDisplay(e/t)):this.tr("upload.megabytes.per.second",l.Text._toDisplay(e/r))},_toDisplay:function(t){return t<.005?"0":(Math.round(100*t)/100).toFixed(2)}}}(),l}),AJS.namespace("AJS.InlineAttach",null,require("jira/attachment/inline-attach"));