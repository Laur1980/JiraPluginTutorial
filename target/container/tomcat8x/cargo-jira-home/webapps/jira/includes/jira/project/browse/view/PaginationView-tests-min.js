AJS.test.require("jira.webresources:browseprojects",function(){require(["jira/project/browse/paginationview","jquery"],function(e,t){module("PaginationView",{setup:function(){var i=t('<ol class="aui-nav aui-nav-pagination">    <li class="aui-nav-previous"><a href="" data-page="1">Prev</a></li></ol>');this.view=new e({el:i,collection:{getPage:sinon.stub(),on:sinon.stub(),off:sinon.stub(),state:{firstPage:1,lastPage:20,currentPage:1},Events:[]},model:{getQueryParams:sinon.stub().returns(""),on:sinon.stub(),off:sinon.stub()}}),this.view.bindUIElements()}}),test("Should change page and trigger event on page click.",function(){var e=sinon.spy();this.view.on("navigate",e),t(this.view.ui.page[0]).click(),sinon.assert.calledOnce(e),sinon.assert.calledWith(e,1),sinon.assert.calledWith(this.view.collection.getPage,1)}),test("First page should be calculated correctly",function(){this.view.collection.state.currentPage=1;var e=this.view.serializeData();equal(e.firstPage,1),this.view.collection.state.currentPage=6,e=this.view.serializeData(),equal(e.firstPage,1),this.view.collection.state.currentPage=7,e=this.view.serializeData(),equal(e.firstPage,2),this.view.collection.state.currentPage=10,e=this.view.serializeData(),equal(e.firstPage,5)}),test("Last page should be calculated correctly",function(){this.view.collection.state.currentPage=20;var e=this.view.serializeData();equal(e.lastPage,20),this.view.collection.state.currentPage=15,e=this.view.serializeData(),equal(e.lastPage,20),this.view.collection.state.currentPage=14,e=this.view.serializeData(),equal(e.lastPage,19),this.view.collection.state.currentPage=10,e=this.view.serializeData(),equal(e.lastPage,15)})})});