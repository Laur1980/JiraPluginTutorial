AJS.test.require(["jira.webresources:jqlautocomplete"],function(){"use strict";function r(r,o){test("test query: "+r,function(){var e=t(f),i=e.parse(r);o===a?ok(i.parseError,"Expected parsing to fail"):ok(!i.parseError,"Expected parsing to be successful")})}var o,e,i,t=require("jira/jql/jql-parser"),a="PARSE_FAIL",n="SUCCESS",s="{}*/%+$#@?;",p=["abort","access","add","after","alias","all","alter","and","any","as","asc"],f=["greater","for","privileges","float","validate","distinct","of","break","defaults","byte","initial","file","noaudit","empty","on","false","boolean","right","option","decrement","limit","else","increment","fetch","equals","or","number","table","like","create","row","declare","not","trans","asc","start","session","then","view","strict","explain","go","unique","desc","raise","exclusive","before","next","inout","goto","date","nowait","escape","mode","character","rownum","union","encoding","delete","current","whenever","left","do","null","end","min","trigger","intersection","define","max","previous","integer","sqrt","return","true","checkpoint","divide","join","access","alter","field","delimiter","string","exists","modulo","having","public","insert","abort","uid","to","last","grant","count","transaction","synonym","inner","char","drop","rename","collate","by","where","long","identified","prior","function","revoke","after","remainder","values","more","commit","when","any","power","notin","returns","avg","index","execute","minus","select","int","double","size","rows","and","difference","input","default","isempty","intersect","column","exec","output","cf","update","raw","connect","set","catch","sum","object","from","add","collation","while","share","order","isnull","if","less","between","all","with","is","check","alias","resource","lock","into","modify","audit","as","multiply","in","decimal","begin","subtract","immediate","outer","continue","group","user","rowid","first"];for(r('priority = "qwerty"',n),r('priority = "qwerty"',n),r('priority="qwerty"',n),r("priority=qwerty",n),r("  priority=qwerty  ",n),r("priority=     qwerty order      by priority, other",n),r("coolness >= awesome",n),r("coolness > awesome",n),r("coolness < awesome",n),r("coolness <= awesome",n),r("coolness        !=       awesome order     by     coolness desc",n),r('language in (java, c, "python2")',n),r('languagein   IN    (   java, c     , "python2")',n),r('inlanguage in (java, c, "python2")',n),r('pri in (java,c,"python2")',n),r("pri in(java)",n),r("pri In(java)",n),r("pri iN(java)",n),r('language not in (java, c, "python2")',n),r('languagein  NOT   IN    (   java, c     , "python2")',n),r('inlanguage not in (java, c, "python2")',n),r('pri NOT in (java,c,"python2")',n),r("pri not in(java)",n),r("pri NoT In(java)",n),r("pri nOT iN(java)",n),r("pri ~ stuff",n),r("pri~stuff",n),r("pri ~ 12",n),r("pri~12",n),r('pri ~ ("stuff", 12)',n),r("pri !~ stuff",n),r("pri!~stuff",n),r("pri !~ 12",n),r("pri!~12",n),r('pri !~ ("stuff", 12)',n),r("pri IS stuff",n),r("pri is stuff",n),r("pri IS EMPTY",n),r("pri IS NOT stuff",n),r("pri IS not stuff",n),r("pri is Not stuff",n),r("pri is not stuff",n),r("pri iN((java), duke)",n),r("priority = 12345",n),r("priority = -12345",n),r('priority = "12a345"',n),r("priority = 12345a",n),r("cf[12345] = 12345a",n),r("Cf  [ 0005 ] = x",n),r('priority = "12345"',n),r('priority="12a345"',n),r("testfield = EMPTY",n),r("testfield = empty",n),r("testfield = NULL",n),r("testfield = null",n),r('testfield = "null"',n),r('testfield = "NULL"',n),r('testfield = "EMPTY"',n),r('testfield = "empty"',n),r('priority = "a big string ~ != foo and priority = haha "',n),r('priority = ""',n),r("prior\\'ty = testvalue",n),r("priority\\ ty=testvalue",n),r("priority⻥ > 6",n),r("priori\\nty\\u2ee5 > 6",n),r("\\     < 38",n),r('"this is a strange field " = google',n),r("\"don't\" = 'true'",n),r('"don\\"t" = \'false\'',n),r("'don\"t' = 'false'",n),r("'cf[1220]' = abc",n),r("'cf' = abc",n),r("10245948 = abc      order          by 10245948",n),r("-10245948 = abc",n),r("new\\nline = abc",n),r("some\\u0082control = abc  order by some\\u0082control",n),r("b = ''",n),r("b = \\ ",n),r("b = don\\'t\\ stop\\ me\\ now",n),r("b = ⻥",n),r("b = \\u2EE5jkdfskjfd",n),r("b not in 'jack says, \"Hello World!\"'",n),r("b not in 'jack says, \\'Hello World!\\''",n),r("b not in \"jack says, 'Hello World!'\"",n),r('b not in "jack says, \\"Hello World!\'\\""',n),r('b not in "jack says, \\tnothing"',n),r("bad ~ wt\\u007f",n),r('priority = "a \\n new \\r line"',n),r('priority = "Tab:\\t NewLine:\\n Carrage Return:\\r"',n),r('priority = "Quote:\\" Single:\\\' Back Slash:\\\\ Space:\\ "',n),r('priority = "Unicode: \\ufeeF1 Unicode2: \\u6EEF"',n),r("priority = 'Escape\" don\\'t'",n),r('priority = "Escape\' don\\"t"',n),r("priority = higherThan(Major)",n),r('priority In     randomName(Major, Minor,      "cool", -65784)',n),r("priority    >=    randomName()",n),r("pri not in fun(name\\u0082e)",n),r("a = func\\'  ()",n),r("a = fu\\\"nc\\'()",n),r("a=function\\ name(  )",n),r("a = ⻥()",n),r("a = somereallystrangestring\\u2ee5()",n),r('version <= "affected\\ versions"(   )',n),r('version <= "affected\\ versio\'ns"(   )',n),r('version <= "affected versio\\"ns"(   )',n),r("version <= 'my messed up versio\\'ns'     (   )",n),r("version <= 'my m\\nessed up\\ versio\"ns'     (   )",n),r("version <= 4759879855`(   )",n),r("version <= 4759879(   )",n),r("version = badname\\u0091",n),r("a=b&c=d",n),r("a=b&&c=d",n),r("a=b|c=d",n),r("a=b||c=d",n),r("a<b",n),r("a>b",n),r("a~b",n),r("priority = major and foo > bar()",n),r("priority = majorand and foo>bar()",n),r("priority = major and foo > bar()",n),r("priority != major    and      foo >      bar()",n),r("priority != major    &&      foo >      bar()",n),r("priority != andmajor    &      foo >      bar()",n),r("priority != andmajor    and      foo >      bar() order by priority     DESC,      foo",n),r("a =b",n),r("a !=b",n),r("a >=b",n),r("a <=b",n),r("a !~b",n),r("a ~b",n),r("priority = major or foo > bar()",n),r("priority = major or foo > bar()",n),r("priority = major or foo > bar() or priority = minor",n),r("priority = major || foo > bar() | priority = minor",n),r("priority = major or foo > bar() || priority = minor",n),r("priority = major and foo > bar(1,2,3) or priority = minor and baz != 1234",n),r("priority =     major AND foo > bar(1,2,3) oR priority = minor and baz != 1234",n),r("priority=major and foo>bar(1,2,3)|| priority=minor  and  baz!=1234",n),r("priority = major AND foo > bar(1,2,3) Or priority = minor AND baz != 1234",n),r("priority = major && foo > bar(1,2,3) AND priority = minor and baz != 1234",n),r("priority = major and (foo > bar(1,2,3) OR priority = minor) and baz != 1234",n),r("priority = major or (foo > bar(1,2,3) or priority = minor) and baz != 1234",n),r("not priority = major or foo > bar() or priority = minor",n),r('not priority = major or foo > bar() AnD priority="minor"',n),r('not priority = major or not foo > bar() AnD priority="minor"',n),r('not (priority = major or not foo > bar()) AnD priority="minor"',n),r('! (priority = major or ! foo > bar()) AnD priority="minor"',n),r("! (priority changed from major or ! foo > bar()) AnD priority changed to minor",n),r('not not (not priority = major or     foo >bar()) and         priority="minor"',n),o=0;o<s.length;o++)i=s.charAt(o),e="test"+i+"dfjd",r("'"+e+"' = 'good'",n);for(r("order by crap",n),r("order by crap  DESC",n),r("order by crap  ASC",n),r("",n),r('affectedVersion = "New Version 1" order by affectedVersion         ASC,         affectedVersion       DESC, cf[1234]  DESC    ',n),r('(not (resolutiondate <= "2008-01-01") and (type in (Improvement)) or "Priority for beta phase" = 3) and\nassignee = currentUser() order by status',n),r('(not (resolutiondate <= "2008-01-01") and (type in (Improvement)) or "Priority for beta phase" = 3) or\nassignee = currentUser() order by status',n),r('(not (resolutiondate <= "2008-01-01") and (type in (Improvement)) or "Priority for beta phase" = 3) and not\nassignee = currentUser() order by status',n),r("issue.property[x]=y",n),r("issue.property[x.y].test.path = y",n),r("issue.property[x.y].test.path = y.a",n),r("issue.property = y",a),r("issue.property",a),r("issue.property[.x] = y",a),r("issue.property[x] = x",n),r("issue.property[issue.status] = resolved",n),r('ISSUE.property["issue.status"] = resolved',n),r("issue.property['issue.status'] = resolved",n),r("issue.property     ['issue.status'] = resolved",n),r("issue.property['1@4s'] = resolved",n),r("issue.property[1234] = resolved",n),r("issue.property[-1234] = resolved",n),r("issue.property.x = y",a),r("issue.ProPeRty['-@,@'] = resolved",n),r("comment.prop[author]= filip",a),r("comment.prop[author]..a= filip",a),r("version = 1.2.3",n),r("       ",a),r("foo",a),r("foo=",a),r("=",a),r("!=",a),r("foo bar and 78foo = bar",a),r("and and",a),r("a=b a=b",a),r("foo=bar and",a),r("foo=bar and and",a),r("foo=bar and 78foo",a),r("foo=bar and 78foo=",a),r("foo=bar and \n78foo",a),r("foo=bar and 78foo brenden and a=b",a),r("foo=bar and \n78foo brenden and a=b",a),r("foo=bar and not",a),r("foo=bar and not foo =",a),r("not",a),r("not not",a),r("a=b and not not=b",a),r("a=b not a=b",a),r("(",a),r("abc = ()",a),r("abc ~ ()",a),r("abc = )foo(",a),r("abc in (foo",a),r("abc in (foo(",a),r("abc IN ((foo)",a),r("abc in (foo))",a),r("abc in ((fee, fie, foe, fum), 787, (34, (45))",a),r("priority = 12345=== not p jfkff fjfjfj",a),r("priority = 12345 jfkff fjfjfj",a),r("priority=a jfkff=fjfjfj",a),r("priority=12345 jfkff=fjfjfj",a),r("a=b ,b",a),r("a=b,b",a),r("a inb",a),r("a isb",a),r("a is notb",a),r("a not inb",a),o=0;o<p.length;o++)r(p[o]+" = stuff",a),r("stuff = "+p[o],a);for(r("cf[1234 = x",a),r("cf1234] = x",a),r("cf[z123] = x",a),r("cf[-123] = x",a),r("cf[] = x",a),r("[54] = x",a),r("pri notin (x)",a),r("pri isnot empty",a),r("pri ^ empty",a),r("pri ! in (test)",a),r("pri is ! empty",a),r('priority = """',a),r('priority = "',a),r("priority = '''",a),r("priority = '",a),r("what = hrejw'ewjrhejkw",a),r('wh"at = hrejwewjrhejkw',a),r("'' = bad",a),r('"" = bad',a),r("a = ''()",a),r('b = ""()',a),r("test = case\\",a),r("test = case\\k",a),r("test = case\\u",a),r("test = case\\u278q",a),r("test = case\\u27",a),r("test = case\\u-998",a),r("test = case order by \\u-998",a),r("test = case\\uzzzz",a),r("test = case\\u278qzzzz",a),r("test = case\\u27zzzzz",a),r("tecase\\u-998zzzzz",a),r("case order by \\u-998zzzzz",a),r("cf = brenden",a),r("cf = broken",a),r("\0iuyiuyiu",a),r("aa = order by ",a),r("cont\nrol = ''",a),r("control = f\run()",a),r("a = b order by",a),r("a = b order bya",a),r("a = b order",a),r("a = b order BY abc desc, ",a),r("a = b order BY abc desc,qq,",a),r("a = b order BY abc qq asc,",a),r("a = b ANDaffectedVersion=hello",a),r("a = b ORaffectedVersion=hello",a),r("a = b ORNOTaffectedVersion=hello",a),o=0;o<s.length;o++)i=s.charAt(o),r("test"+i+"dfjd = 'bad'",a);r("f\n = \n \n abc *",a),r("f *= abc",a)});