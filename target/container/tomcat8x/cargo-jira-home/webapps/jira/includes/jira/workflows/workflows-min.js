require(["jquery","wrm/context-path","jira/dialog/form-dialog"],function(e,o,t){e(function(){function a(e){return e===l?l:n}function r(o){e.ajax({url:d+"/rest/api/2/mypreferences?key="+w,type:"PUT",contentType:"application/json",dataType:"json",data:a(o)})}function i(o){var t=e("#workflow-"+o);t.hasClass("active")||(e(".workflow-view-toggle").each(function(){var o=e(this);t.is(o)?o.addClass("active"):o.removeClass("active")}),e(".workflow-view").addClass("hidden"),e(t.attr("href")).removeClass("hidden").trigger(e.Event("show")),e(document.documentElement).css("overflow-y",""))}var n="diagram",l="text",w="workflow-mode",d=o(),s=e(".workflow-view-toggle");e(document).on("click",".workflow-view-toggle",function(o){o.preventDefault();var t,n=e(this);n.hasClass("active")||(t=a(n.data("mode")),r(t),i(t))}),s.length||r(e("#jwd").length>0?n:l),new t({id:"edit-workflow-dialog",trigger:"#edit-workflow-trigger"})})});