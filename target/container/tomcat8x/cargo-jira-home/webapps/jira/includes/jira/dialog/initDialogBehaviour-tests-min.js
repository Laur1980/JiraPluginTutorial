AJS.test.require(["jira.webresources:jira-global"],function(){require(["jquery","jira/dialog/dialog-register","jira/dialog/form-dialog","jira/dialog/init-dialog-behaviour","jira/issue"],function(e,t,i,o,s){module("initDialogBehaviour",{setup:function(){this.sandbox=sinon.sandbox.create(),this.sandbox.stub(s,"getIssueId").returns(null)},teardown:function(){delete t.testDialog,this.sandbox.restore()}}),test("Non Issue Dialog will not prevent beforeShow event",function(){t.testDialog=new i,o.init();var s=new e.Event("beforeShow");e(t.testDialog).trigger(s),ok(!s.isDefaultPrevented(),"default should not have been prevented for non issue dialog")}),test("Issue Dialog will prevent beforeShow event",function(){t.testDialog=new i({isIssueDialog:!0}),o.init();var s=new e.Event("beforeShow");e(t.testDialog).trigger(s),ok(s.isDefaultPrevented(),"default should have been prevented for issue dialog")}),test("Issue Dialog will not prevent beforeShow event when there's a selected issue",function(){s.getIssueId.returns(1e4),t.testDialog=new i({isIssueDialog:!0}),o.init();var n=new e.Event("beforeShow");e(t.testDialog).trigger(n),ok(!n.isDefaultPrevented(),"default should not have been prevented for issue dialog when there's an issue.")})})});