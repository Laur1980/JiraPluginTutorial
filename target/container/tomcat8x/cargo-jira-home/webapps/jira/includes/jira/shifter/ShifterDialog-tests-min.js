AJS.test.require(["jira.webresources:shifter"],function(){var e,i=require("jira/shifter/shifter-dialog"),t=require("jira/shifter/shifter-analytics"),s=require("jquery"),r=sinon.assert;module("ShifterDialog",{setup:function(){this.sandbox=sinon.sandbox.create(),this.sandbox.useFakeTimers(),this.sandbox.stub(t,"selection"),e=new i("shifter-dialog",[{id:"group-id",name:"name",weight:1,getSuggestions:function(){var e=s.Deferred();return e.resolve([{label:"label",value:"value"}]),e.promise()},onSelection:sinon.stub()}],{maxResultsDisplayedPerGroup:5}),this.sandbox.clock.tick(1e3)},teardown:function(){e.destroy(),s("#shifter-dialog").remove(),this.sandbox.restore()}}),test("should trigger analytics event on selection",function(){var i=s.Event("keydown");i.which=i.keyCode=AJS.keyCode.ENTER,e.$dialog.find("input").trigger(i),r.calledOnce(t.selection),r.calledWith(t.selection,"label","value","group-id")})});