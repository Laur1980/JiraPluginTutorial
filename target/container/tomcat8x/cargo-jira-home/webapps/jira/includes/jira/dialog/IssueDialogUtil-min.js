define("jira/dialog/dialog-util",["jira/dialog/dialog-register","jira/jquery/deferred","jira/issuenavigator/issue-navigator","jquery"],function(e,s,t,i){var u={};return u.getDefaultAjaxOptions=function(){if(JIRA&&"function"==typeof e.getDefaultAjaxOptions&&u.getDefaultAjaxOptions!==e.getDefaultAjaxOptions)return e.getDefaultAjaxOptions.apply(this,arguments);var s=t.get$focusedRow(),i=this.options.url||this.getRequestUrlFromTrigger();if(/id=\{0\}/.test(i)){if(!s.length)return!1;i=i.replace(/(id=\{0\})/,"id="+s.attr("rel"))}if(t.isNavigator()){var r=/[?&]id=([0-9]+)/.exec(i);this.issueId=r&&2===r.length?r[1]:null,this.issueId!==s.attr("rel")&&(t.Shortcuts.focusRow(this.issueId),s=t.get$focusedRow()),this.issueKey=t.getSelectedIssueKey()}return{url:i,data:{decorator:"dialog",inline:"true"}}},u.BeforeShowIssueDialogHandler=function(){var e=[];return{add:function(s){return e.push(s),this},execute:function(){var t=[];return 0===e.length?s().resolve():(i.each(e,function(e,s){t.push(s())}),i.when.apply(i,t))}}}(),u.storeCurrentIssueIdOnSucessfulSubmit=function(){t.isNavigator()&&t.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey})},u}),function(e){AJS.namespace("JIRA.Dialogs",null,require("jira/dialog/dialog-register")),AJS.namespace("JIRA.Dialogs.getDefaultAjaxOptions",null,e.getDefaultAjaxOptions),AJS.namespace("JIRA.Dialogs.BeforeShowIssueDialogHandler",null,e.BeforeShowIssueDialogHandler),AJS.namespace("JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit",null,e.storeCurrentIssueIdOnSucessfulSubmit)}(require("jira/dialog/dialog-util"));