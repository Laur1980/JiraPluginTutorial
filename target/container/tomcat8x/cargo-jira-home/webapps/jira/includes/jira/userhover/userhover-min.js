define("jira/userhover/userhover",["jira/ajs/dropdown/dropdown-factory","aui/inline-dialog","wrm/context-path","jquery"],function(e,n,i,o){"use strict";var a=i(),t=function(){};return t.INLINE_DIALOG_OPTIONS={urlPrefix:a+"/secure/ViewUserHover!default.jspa?decorator=none&username=",showDelay:400,closeOthers:!1,noBind:!0,hideCallback:function(){this.popup.remove()}},t.show=function(e){clearTimeout(o.data(e,"AJS.InlineDialog.delayId")||0),o.data(e,"AJS.InlineDialog.hasUserAttention",!0),o.data(e,"AJS.InlineDialog")||t._locked||""===AJS.params.loggedInUser||o.data(e,"AJS.InlineDialog.delayId",setTimeout(function(){if(0===o(e).closest("html").length)return void t.hide(e);o.data(e,"AJS.InlineDialog",new n(o(e),"user-hover-dialog-"+(new Date).getTime(),function(n,i,o){t._fetchDialogContents(n,e,o)},t.INLINE_DIALOG_OPTIONS)).show()},t.INLINE_DIALOG_OPTIONS.showDelay))},t.hide=function(e,n){clearTimeout(o.data(e,"AJS.InlineDialog.delayId")||0),o.data(e,"AJS.InlineDialog.hasUserAttention",!1);var i=o.data(e,"AJS.InlineDialog");i&&!t._locked&&("number"!=typeof n&&(n=t.INLINE_DIALOG_OPTIONS.showDelay),n>=0?o.data(e,"AJS.InlineDialog.delayId",setTimeout(function(){i.hide(),o.data(e,"AJS.InlineDialog",null)},n)):(i.hide(),o.data(e,"AJS.InlineDialog",null)))},t._locked=!1,t._fetchDialogContents=function(n,i,a){o.get(t.INLINE_DIALOG_OPTIONS.urlPrefix+encodeURIComponent(i.getAttribute("rel")),function(l){o.data(i,"AJS.InlineDialog.hasUserAttention")&&(n.html(l),n.css("overflow","visible"),o(e.createDropdown({trigger:n.find(".aui-dd-link"),content:n.find(".aui-list")})).bind({showLayer:function(){t._locked=!0},hideLayer:function(){t._locked=!1,o.data(i,"AJS.InlineDialog.hasUserAttention")||t.hide(i)}}),a(),o.data(i,"AJS.InlineDialog.delayId",setTimeout(function(){n.bind({mousemove:function(){t.show(i)},mouseleave:function(){t.hide(i)}})},t.INLINE_DIALOG_OPTIONS.showDelay)))})},t}),AJS.namespace("jira.app.userhover",null,require("jira/userhover/userhover")),AJS.namespace("JIRA.userhover",null,require("jira/userhover/userhover"));