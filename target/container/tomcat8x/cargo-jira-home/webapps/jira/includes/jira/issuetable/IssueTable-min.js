define("jira/issuetable",["jquery","backbone","jira/skate","jira/featureflags/feature-manager","jira/deprecator","underscore"],function(e,t,n,a,r,i){var o=function(t){return{enable:function(){if(a.isFeatureEnabled("com.atlassian.jira.issuetable.draggable")){var n={original:-1,current:-1};e(t.element).children("tbody").sortable("destroy");var r=e(t.element).find("tbody");void 0!==r.sortable("instance")&&r.sortable("destroy"),r.sortable({items:"> tr",appendTo:"parent",helper:"clone",start:function(e,a){var r=a.item[0];n.original=t.idx(r),t.trigger(t.Events.ROW_DRAG_STARTED,{row:r,position:n})},stop:function(e,a){var r=a.item[0];n.current=t.idx(r),t.trigger(t.Events.ROW_DRAG_COMPLETED,{row:r,position:n})}}),e(t.element).find("tbody tr").addClass("issue-table-draggable")}},disable:function(){e(t.element).children("tbody").sortable("destroy")},cancel:function(){e(t.element).children("tbody").sortable("cancel")}}},s=function(n){var a=i.extend({element:n,Events:{ROW_DRAG_STARTED:"jira-issuetable-web-component-row-drag-started",ROW_DRAG_COMPLETED:"jira-issuetable-web-component-row-drag-completed",ROW_DRAG_CANCELED:"jira-issuetable-web-component-row-drag-canceled"},idx:function(t){return e(t).index()},dragging:null},t.Events);return a.dragging=o(a),a},c=i.extend({tables:[],Events:{ATTACHED:"jira-issuetable-web-component-attached",DETACHED:"jira-issuetable-web-component-detached"},onTable:function(e){this.tables.forEach(e),this.on(this.Events.ATTACHED,e)},cancelDragging:function(){this.tables.forEach(function(e){e.dragging.cancel()})}},t.Events);r.prop(c,"cancelDragging",{sinceVersion:"7.5",removeInVersion:"7.6"});var l={attach:function(e){c.tables.push(e),c.trigger(c.Events.ATTACHED,e)},detach:function(e){c.tables.forEach(function(t,n){e===t&&(c.tables.splice(n),c.trigger(c.Events.DETACHED,t))})}};return n("issuetable-web-component",{attached:function(e){e.table=s(e),l.attach(e.table)},detached:function(e){if(!e.table)throw new Error("IssueTable hasn't been properly initialized");l.detach(e.table)}}),c});