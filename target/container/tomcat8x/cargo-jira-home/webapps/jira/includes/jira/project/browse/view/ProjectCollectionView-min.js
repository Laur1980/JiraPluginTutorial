define("jira/project/browse/projectcollectionview",["jira/analytics","jira/util/formatter","jira/util/data/meta","marionette","jquery","jira/project/browse/projectview","jira/project/browse/projecttypesservice","jira/project/project-type-keys"],function(e,t,r,i,o,c,s,n){"use strict";return i.CompositeView.extend({template:JIRA.Templates.Project.Browse.projects,itemView:c,itemViewOptions:function(){return{filters:this.model}},itemEvents:{"project-view.click-project-name":function(e,t,r){var i=this.collection.indexOf(r);this.trigger("project-view.click-project-name",r,i)},"project-view.click-lead-user":function(e,t,r){var i=this.collection.indexOf(r);this.trigger("project-view.click-lead-user",r,i)},"project-view.click-category":function(e,t,r){var i=this.collection.indexOf(r);this.trigger("project-view.click-category",r,i)},"project-view.click-url":function(e,t,r){var i=this.collection.indexOf(r);this.trigger("project-view.click-url",r,i)}},emptyView:i.ItemView.extend({events:{"click .empty-state-add-project-button":"_handleAddProjectClicked"},shouldUseCallToActionTemplate:function(){var e=[n.SOFTWARE,n.SERVICE_DESK,n.BUSINESS];return this.options.filters.get("projectType")&&"all"===this.options.filters.get("category").id&&""===this.options.filters.get("contains")&&-1!==e.indexOf(this.options.filters.get("projectType").key)},getTemplate:function(){return this.shouldUseCallToActionTemplate()?JIRA.Templates.Project.Browse.emptyRowWithCallToAction:JIRA.Templates.Project.Browse.emptyRow},onRender:function(){this.unwrapTemplate()},_handleAddProjectClicked:function(t){e.send({name:"projects.browse.empty.state.add.projects.clicked",properties:{projectTypeKey:o(t.target).data("project-type")}})},serializeData:function(){var e={};if(this.shouldUseCallToActionTemplate()){var i=this.options.filters.get("projectType").key;i===n.SOFTWARE?e={headerText:t.I18n.getText("browse.projects.software.projects.title"),descriptionText:t.I18n.getText("browse.projects.software.projects.description"),callToActionText:t.I18n.getText("browse.projects.create.new.project.link"),projectType:i}:i===n.SERVICE_DESK?e={headerText:t.I18n.getText("browse.projects.servicedesk.projects.title"),descriptionText:t.I18n.getText("browse.projects.servicedesk.projects.description"),callToActionText:t.I18n.getText("browse.projects.create.new.project.link"),projectType:i}:i===n.BUSINESS&&(e={imageClassName:"create-business-project-image",headerText:t.I18n.getText("browse.projects.business.projects.not.created"),descriptionText:t.I18n.getText("browse.projects.business.projects.description"),callToActionText:t.I18n.getText("browse.projects.create.new.project.link"),projectType:i})}return o.extend({isAdmin:r.get("is-admin")},e)}}),itemViewContainer:"tbody",onRender:function(){this.unwrapTemplate()}})});