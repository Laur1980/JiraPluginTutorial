AJS.test.require(["jira.webresources:jira-global"],function(){"use strict";var e=require("jquery");module("JIRA Flags",{setup:function(){var s=AJS.test.mockableModuleContext(),t=e.extend({},require("jira/flag"));this.stubbedFlagMethod=sinon.stub(t,"showMsg"),s.mock("jira/flag",t),this.message=s.require("jira/message"),this.flagCalledWith=function(e,s){sinon.assert.calledWith(this.stubbedFlagMethod,"",e);var t=this.stubbedFlagMethod.lastCall.args[2];s=s||{},"type"in s&&equal(t.type,s.type),"close"in s&&equal(t.close,s.close)}},teardown:function(){this.stubbedFlagMethod.restore()}}),test("Calls jira.flag & sets correct defaults",function(){this.message.showMsg("body"),this.flagCalledWith("body")}),test("Uses Info, Success, Warning & Error types",function(){var e="body";this.message.showSuccessMsg(e),this.flagCalledWith(e,{type:"success"}),this.message.showWarningMsg(e),this.flagCalledWith(e,{type:"warning"}),this.message.showErrorMsg(e),this.flagCalledWith(e,{type:"error"}),this.message.showMsg(e,{type:"success"}),this.flagCalledWith(e,{type:"success"})}),test("A closeable value of false makes the message disappear automatically",function(){this.message.showMsg("body",{closeable:!1}),this.flagCalledWith("body",{close:"auto"})}),test("Respects timeout value",function(){this.message.showMsg("body",{timeout:10}),this.flagCalledWith("body",{close:"auto"}),this.message.showMsg("body",{timeout:0}),this.flagCalledWith("body",{close:"manual"}),this.message.showMsg("body",{timeout:-1}),this.flagCalledWith("body",{close:"manual"})}),test("Gives preference to timeout value over closeable",function(){var e="body";this.message.showMsg(e,{timeout:-1,closeable:!1}),this.flagCalledWith(e,{close:"never"}),this.message.showMsg(e,{timeout:0,closeable:!1}),this.flagCalledWith(e,{close:"never"}),this.message.showMsg(e,{timeout:10,closeable:!1}),this.flagCalledWith(e,{close:"auto"}),this.message.showMsg(e,{timeout:-1,closeable:!0}),this.flagCalledWith(e,{close:"manual"}),this.message.showMsg(e,{timeout:0,closeable:!0}),this.flagCalledWith(e,{close:"manual"}),this.message.showMsg(e,{timeout:10,closeable:!0}),this.flagCalledWith(e,{close:"auto"})}),test("Adds an id to the created flag if it is present in the options",function(){this.stubbedFlagMethod.returns("<div/>");var e=this.message.showMsg("message",{id:"expectedId"});equal(e.attr("id"),"expectedId")}),test("Does not add an id to the created flag if it is not present in the options",function(){this.stubbedFlagMethod.returns("<div/>");var e=this.message.showMsg("message",{});equal(e.attr("id"),null)})});