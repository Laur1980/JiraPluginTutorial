AJS.test.require(["jira.webresources:edit-project-details"],function(){function e(){var e='<div><select class="project-type-select select" name="projectTypeKey" id="projectTypeKey">';return n.each(r,function(t){e+='<option value="'+t+'">'+t+"</option>"}),e+="</select></div>"}function t(){var e=i("#aui-flag-container").find(".aui-flag");return e&&"false"===e.attr("aria-hidden")}var i=require("jquery"),n=require("underscore"),o=require("jira/project/edit/project-type-field"),r=["business","software","service_desk"];module("JIRA.Project.ProjectTypeField",{setup:function(){this.$field=i(e()),i("#qunit-fixture").append(this.$field),new o({el:this.$field}),this.changeProjectType=function(e){this.$field.find(".drop-menu").click(),i("#projectTypeKey-suggestions").find("li.aui-list-item-li-"+e).click()}},teardown:function(){i("#aui-flag-container").remove(),i("#projectTypeKey-suggestions").parent().remove()}}),test("Converts the project type select to a SingleSelect",function(){ok(this.$field.find("#projectTypeKey-field"),"Should have created it's own single select field"),ok(this.$field.find("#projectTypeKey").hasClass("aui-ss-select"),"Should have modified the original select box")}),test("Changing to a different project type opens a flag, checking warnable working for it",function(){this.changeProjectType(r[1]),ok(t(),"Should have a flag with the message")})});