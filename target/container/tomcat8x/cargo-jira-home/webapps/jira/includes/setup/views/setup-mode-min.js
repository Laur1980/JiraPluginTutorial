define("jira/setup/setup-mode-view",["jquery","backbone","underscore","jira/setup/setup-abstract-view","jira/setup/setup-language-view"],function(e,a,i,g,t){return g.extend({languageDialogSelector:"#jira-setup-language-dialog",pageStorageKey:"jira.setup.mode.page",ui:{languageDialogTrigger:".jira-setup-language-dialog-trigger"},events:{"click @ui.languageDialogTrigger":"onLanguageDialogTriggerClick"},initialize:function(){this.langDialog=AJS.dialog2(this.languageDialogSelector),this.languageView=new t({el:this.languageDialogSelector}),this.listenTo(this.languageView,"cancel-requested",this.onLanguageViewCancelRequested),this.langDialog.on("show",i.bind(function(){this.languageView.showInitial(),this.languageView.start()},this));var e=this.getPageDataKey("choiceBoxValue");e&&this.selectChoiceBox(e)},onSubmit:function(){this.ui.submitButton.enable(!1)},onLanguageDialogTriggerClick:function(){this.openLanguageDialog()},openLanguageDialog:function(){this.langDialog&&this.langDialog.show()},onLanguageViewCancelRequested:function(){this.langDialog.hide()},onChoiceBoxValueChange:function(e){g.prototype.onChoiceBoxValueChange.apply(this,arguments),this.ui.submitButton.attr("value",e.data("choice-submit"))}},{pageStorageKey:"jira.setup.mode.page"})});