define("jira/ajs/layer/inline-layer/iframe-positioning",["jira/ajs/layer/inline-layer/standard-positioning","jira/util/navigator","jquery","jira/util/top-same-origin-window"],function(e,t,n,o){var i=o(window),r=e.extend({offset:function(){var e=r.window(),t=r.topWindow(),o=n("iframe",t.document.body).filter(function(){return this.getAttribute("name")===e.name}),i=o.parent().offset(),l=this._super(),c=this._topDocumentScrollTop(),a=this._topDocumentScrollLeft(),u=this._iframeScrollTop(),s=this._iframeScrollLeft(),d=c-u,f=a-s;return{left:i.left+l.left+f,top:i.top+l.top+d}},_topDocumentScrollTop:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollTop,i.document.documentElement.scrollTop)},_topDocumentScrollLeft:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollLeft,i.document.documentElement.scrollLeft)},_iframeScrollTop:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollTop,window.document.documentElement.scrollTop):0},_iframeScrollLeft:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollLeft,window.document.documentElement.scrollLeft):0},isOffsetIncludingScroll:function(e){return void 0===this.offsetIncludingScroll&&(this.offsetIncludingScroll=!0),void 0!==e&&(this.offsetIncludingScroll=e),this.offsetIncludingScroll},appendToBody:function(){i.jQuery("body").append(this.layer())},window:function(){return i},scrollTo:function(){}});return t.isWebkit()&&(r=r.extend({appendToBody:function(){var e=this.layer();this.layer(this._rebuildLayerInParent()),i.jQuery("body").append(this.layer()),e.remove(),this.rebuilt()},appendToPlaceholder:function(){var e=this.layer();this.layer(this._rebuildLayerInIframe()),this.layer().appendTo(this.placeholder()),e.remove(),this.rebuilt()},_rebuildLayerInParent:function(){return i.jQuery("<div class='ajs-layer'>"+this.layer().html()+"</div>")},_rebuildLayerInIframe:function(){return n("<div class='ajs-layer'>"+this.layer().html()+"</div>")}})),t.isMozilla()&&(r=r.extend({appendToPlaceholder:function(){var e=this.layer();this.layer(e.clone(!0).appendTo(this.placeholder())),this.rebuilt(),window.setTimeout(function(){e.remove()},10)}})),r.window=function(){return window},r.topWindow=function(){return i},r});