define("jira/ajs/list/pageable-list",["jira/util/formatter","jira/ajs/list/list","jira/ajs/list/group-descriptor","jquery","underscore"],function(t,e,i,s,n){return e.extend({init:function(t){var e={pageSize:50,pagingThreshold:100};t=s.extend(!0,e,t),this._super(t),this.pageSize=this.options.pageSize},generateListFromJSON:function(e,s,r){var a,o,h=[],g=0;if(this.pageNumber=this.pageNumber||1,s!==this.lastQuery&&(this.pageNumber=1),s){a=RegExp.escape(s),o=new RegExp(t.format(this.options.matchingStrategy,a),"i");for(var l=0;l<e.length;l++)h.push(new i(n.omit(e[l].allProperties(),"items"))),h[l].items(this._filterOptions(e[l].items(),a,o)),g+=h[l].items().length}else{h=e;for(var l=0;l<e.length;l++)g+=e[l].items().length}g<this.options.pagingThreshold&&(r=!0),this._super(h,s,r)},_filterAndAddOptions:function(e,i,s){var n;return s&&(n=new RegExp(t.format(this.options.matchingStrategy,RegExp.escape(s)),"i")),this._addOptionsToContainer(e,i,s,n)},_addOptionsToContainer:function(t,e,i,n){for(var r=!1,a=[],o=this.pageNumber*this.pageSize,h=0,g=t.length;h<g;h++){var l=t[h];if(this.forceAllResults||this.suggestions<o){var u=this._generateOption(l,i,n);u&&(r=!0,a.push(u[0]))}}return e.children().length?e.find(".aui-list-item:last").after(s(a)):e.html(s(a)),r},addNextPage:function(){var t,e,i,s=this.suggestions;this.pageNumber++;for(var n=0;n<this.lastData.length;n++)t=this.lastData[n],t.items().length>s&&(e=this.$container.find("#"+this._buildElementId(t.label())),0===e.length?(e=this._generateOptGroup(t,this.lastQuery),i="fixed"===t.placement()?this.$container.find(".aui-list-fixed"):this.$container.find(".aui-list-scroll"),i.append(e)):this._filterAndAddOptions(t.items().slice(s),e,this.lastQuery)),s-=t.items().length;return this.reset(this.index),this.suggestions},disable:function(){this._super(),this.pageNumber=1},showPageRenderError:function(){this.$container.find(".aui-last").append(this._render("errorRenderingPage"))},_renders:{errorRenderingPage:function(){return s("<li class='no-suggestions' />").text(t.I18n.getText("common.concepts.error.fetching.page"))}},isDisplayedAllItems:function(){return n.reduce(this.lastData,function(t,e){return t+e.items().length},0)===this.suggestions}})});